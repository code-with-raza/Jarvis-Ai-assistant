<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Jarvis</title>
  <style>
    :root{
      --bg:#070a10;
      --panel:#0d1420;
      --card:#0f1828;
      --border:#1a2a45;
      --text:#eaf1ff;
      --muted:#93a4bf;
      --accent:#4da3ff;
      --good:#4bd37b;
      --warn:#ffcc66;
      --shadow: 0 12px 40px rgba(0,0,0,.45);
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      background:
        radial-gradient(900px 500px at 20% 0%, rgba(77,163,255,.10), transparent 60%),
        radial-gradient(700px 420px at 90% 15%, rgba(75,211,123,.08), transparent 55%),
        radial-gradient(600px 520px at 50% 100%, rgba(77,163,255,.06), transparent 55%),
        var(--bg);
      color:var(--text);
    }
    .wrap{max-width:1060px; margin:28px auto; padding:0 16px;}
    .top{display:flex; align-items:center; justify-content:space-between; gap:12px; margin-bottom:14px;}
    .brand{display:flex; align-items:center; gap:10px;}
    .logo{
      width:42px; height:42px; border-radius:14px;
      background: linear-gradient(135deg, rgba(77,163,255,.35), rgba(75,211,123,.25));
      border:1px solid rgba(77,163,255,.35);
      box-shadow: 0 0 0 6px rgba(77,163,255,.08);
    }
    h1{margin:0; font-size:20px; letter-spacing:.4px;}
    .sub{margin:2px 0 0; color:var(--muted); font-size:12px;}
    .pill{
      font-size:12px; color:#bfe0ff;
      padding:6px 10px; border-radius:999px;
      border:1px solid var(--border);
      background: rgba(15,24,40,.65);
      backdrop-filter: blur(6px);
      display:flex; align-items:center; gap:8px;
    }
    .dot{width:8px; height:8px; border-radius:50%; background:var(--warn); box-shadow:0 0 0 4px rgba(255,204,102,.15);}
    .dot.ok{background:var(--good); box-shadow:0 0 0 4px rgba(75,211,123,.15);}

    .card{
      background: linear-gradient(180deg, rgba(15,24,40,.85), rgba(13,20,32,.90));
      border:1px solid var(--border);
      border-radius:18px;
      box-shadow: var(--shadow);
      overflow:hidden;
    }

    .bar{
      display:flex; gap:10px; align-items:center; flex-wrap:wrap;
      padding:12px; border-bottom:1px solid var(--border);
      background: rgba(13,20,32,.80);
      backdrop-filter: blur(10px);
    }
    .bar input[type="text"]{
      flex:1; min-width:240px;
      padding:11px 12px;
      border-radius:12px;
      border:1px solid rgba(26,42,69,.9);
      background: rgba(7,10,16,.55);
      color:var(--text);
      outline:none;
    }

    .toggle{display:flex; align-items:center; gap:8px; color:var(--muted); font-size:12px; user-select:none;}
    .toggle input{transform: translateY(1px);}

    .upload{
      display:flex; gap:10px; align-items:center;
    }
    .file{
      color:var(--muted);
      font-size:12px;
    }

    .chat{height:560px; overflow:auto; padding:16px 14px 8px; scroll-behavior:smooth;}
    .msg{display:flex; margin:10px 0;}
    .msg.me{justify-content:flex-end;}
    .bubble{
      max-width:78%;
      padding:11px 12px;
      border-radius:16px;
      border:1px solid rgba(26,42,69,.9);
      background: rgba(7,10,16,.55);
      line-height:1.35;
      white-space:pre-wrap;
      word-wrap:break-word;
    }
    .me .bubble{
      background: linear-gradient(180deg, rgba(77,163,255,.16), rgba(17,36,59,.58));
      border-color: rgba(77,163,255,.35);
      box-shadow: 0 0 0 1px rgba(77,163,255,.08) inset;
    }
    .jarvis .bubble{
      background: linear-gradient(180deg, rgba(15,24,40,.85), rgba(7,10,16,.45));
    }

    .status{
      padding:10px 12px;
      font-size:12px;
      color:var(--muted);
      border-top:1px solid rgba(26,42,69,.55);
      background: rgba(13,20,32,.65);
      display:flex; justify-content:space-between; gap:10px;
    }
    #countdown{color:#bfe0ff;}

    .composer{
      display:flex; gap:10px; padding:12px;
      border-top:1px solid var(--border);
      background: rgba(13,20,32,.80);
      backdrop-filter: blur(10px);
    }
    .composer input{
      flex:1;
      padding:12px 12px;
      border-radius:12px;
      border:1px solid rgba(26,42,69,.9);
      background: rgba(7,10,16,.55);
      color:var(--text);
      outline:none;
    }

    button{
      border-radius:12px;
      border:1px solid rgba(26,42,69,.9);
      background: rgba(19,32,51,.85);
      color:var(--text);
      cursor:pointer;
      padding:10px 14px;
      transition: .15s ease;
      white-space:nowrap;
    }
    button:hover{transform: translateY(-1px); background: rgba(23,42,70,.92);}
    button:active{transform: translateY(0px);}

    .mic{width:46px; display:flex; align-items:center; justify-content:center; font-size:18px;}
    .mic.on{
      border-color: rgba(75,211,123,.8);
      box-shadow: 0 0 0 6px rgba(75,211,123,.12);
      animation: pulse 1.2s infinite;
    }
    @keyframes pulse{
      0%{ box-shadow: 0 0 0 0 rgba(75,211,123,.22); }
      100%{ box-shadow: 0 0 0 10px rgba(75,211,123,0); }
    }
    .send{background: rgba(77,163,255,.16); border-color: rgba(77,163,255,.45);}

    .hint{margin-top:10px; color:var(--muted); font-size:12px; text-align:center;}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="top">
      <div class="brand">
        <div class="logo"></div>
        <div>
          <h1>Jarvis</h1>
          <div class="sub">FastAPI + Skills + Memory + Voice + PDF RAG</div>
        </div>
      </div>
      <div class="pill">
        <span class="dot" id="dot"></span>
        <span id="conn">API: checking‚Ä¶</span>
      </div>
    </div>

    <div class="card">
      <div class="bar">
        <input id="session" type="text" value="Malik" placeholder="session_id (e.g.,Malik )" />

        <label class="toggle" title="Jarvis speaks back">
          <span>Voice reply</span>
          <input type="checkbox" id="tts" checked />
        </label>

        <div class="upload">
          <input type="file" id="pdfFile" accept="application/pdf" />
          <button id="uploadBtn">Upload PDF</button>
        </div>
      </div>

      <div class="chat" id="chat"></div>

      <div class="status">
        <div id="status">Tip: click üé§, say ‚Äúhey jarvis‚Äù, speak, pause ‚Üí sends after 5s silence.</div>
        <div id="countdown"></div>
      </div>

      <div class="composer">
        <button class="mic" id="micBtn" title="Voice input">üé§</button>
        <input id="text" placeholder="Type a message‚Ä¶ (Enter to send)" />
        <button class="send" id="sendBtn">Send</button>
      </div>
    </div>

    <div class="hint">
      After uploading a PDF, ask: <b>/pdf ask your question | source=YOURFILE.pdf</b>
    </div>
  </div>

  <script src="app.js"></script>
</body>
</html>
